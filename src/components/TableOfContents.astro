---
import type { MarkdownHeading } from 'astro';

interface Props {
  headings: MarkdownHeading[];
}

const { headings } = Astro.props;

// Filter out h1 (usually title) and limit depth if needed
const toc = headings.filter((h) => h.depth > 1 && h.depth <= 3);
---

{toc.length > 0 && (
  <nav class="toc">
    <h2 class="font-semibold text-slate-900 mb-4 text-sm uppercase tracking-wider">目录</h2>
    <ul class="space-y-2 text-sm">
      {toc.map((heading) => (
        <li class={`pl-${(heading.depth - 2) * 3}`}>
          <a
            href={`#${heading.slug}`}
            class="block text-slate-500 hover:text-blue-600 transition-colors line-clamp-1"
          >
            {heading.text}
          </a>
        </li>
      ))}
    </ul>
  </nav>
)}
