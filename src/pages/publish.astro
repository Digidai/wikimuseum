---
import BaseLayout from '../layouts/BaseLayout.astro';

const GITHUB_OWNER = 'Digidai';
const GITHUB_REPO = 'wikimuseum';
const GIST_URL = 'https://gist.github.com/';
const NEW_ARTICLE_URL = `https://github.com/${GITHUB_OWNER}/${GITHUB_REPO}/issues/new?template=new-article.yml`;
const UPDATE_ARTICLE_URL = `https://github.com/${GITHUB_OWNER}/${GITHUB_REPO}/issues/new?template=update-article.yml`;
const DELETE_ARTICLE_URL = `https://github.com/${GITHUB_OWNER}/${GITHUB_REPO}/issues/new?template=delete-article.yml`;
---

<BaseLayout title="发布文章" description="发布新的 Markdown 文章">
  <div class="max-w-2xl">
    <h1 class="text-4xl font-bold text-notion-text mb-3">发布文章</h1>
    <p class="text-notion-secondary text-lg mb-12">通过 GitHub Gist 发布 Markdown 文章</p>

    <div class="bg-notion-bg rounded-notion p-8 shadow-card mb-8">
      <h2 class="text-xl font-semibold text-notion-text mb-6">发布步骤</h2>

      <div class="space-y-6">
        <div class="flex gap-4">
          <div class="flex-shrink-0 w-8 h-8 bg-notion-text text-notion-bg rounded-full flex items-center justify-center font-semibold text-sm">
            1
          </div>
          <div class="flex-1 pt-1">
            <h3 class="font-medium text-notion-text mb-1">创建 Gist</h3>
            <p class="text-notion-secondary text-sm mb-3">
              文件名填 <code class="bg-notion-hover px-1.5 py-0.5 rounded text-xs">article.md</code>，粘贴文章内容
            </p>
            <a
              href={GIST_URL}
              target="_blank"
              rel="noopener noreferrer"
              class="inline-block text-notion-blue text-sm font-medium hover:underline"
            >
              打开 GitHub Gist →
            </a>
          </div>
        </div>

        <div class="flex gap-4">
          <div class="flex-shrink-0 w-8 h-8 bg-notion-text text-notion-bg rounded-full flex items-center justify-center font-semibold text-sm">
            2
          </div>
          <div class="flex-1 pt-1">
            <h3 class="font-medium text-notion-text mb-1">提交发布请求</h3>
            <p class="text-notion-secondary text-sm mb-3">
              填入 Gist 链接，系统将自动发布文章
            </p>
            <a
              href={NEW_ARTICLE_URL}
              target="_blank"
              rel="noopener noreferrer"
              class="inline-block px-5 py-2.5 bg-notion-text text-notion-bg rounded-lg text-sm font-medium hover:opacity-90 transition-opacity"
            >
              提交发布请求
            </a>
          </div>
        </div>
      </div>
    </div>

    <div class="bg-notion-bg rounded-notion p-8 shadow-card">
      <h2 class="text-xl font-semibold text-notion-text mb-6">管理文章</h2>

      <div class="flex gap-4">
        <a
          href={UPDATE_ARTICLE_URL}
          target="_blank"
          rel="noopener noreferrer"
          class="flex-1 p-4 border border-notion-border rounded-lg text-center hover:border-notion-text transition-colors"
        >
          <span class="block font-medium text-notion-text">更新文章</span>
          <span class="text-sm text-notion-tertiary">修改已发布内容</span>
        </a>
        <a
          href={DELETE_ARTICLE_URL}
          target="_blank"
          rel="noopener noreferrer"
          class="flex-1 p-4 border border-notion-border rounded-lg text-center hover:border-red-500 transition-colors"
        >
          <span class="block font-medium text-notion-text">删除文章</span>
          <span class="text-sm text-notion-tertiary">永久移除文章</span>
        </a>
      </div>
    </div>
  </div>
</BaseLayout>
